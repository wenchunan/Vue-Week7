"use strict";(self["webpackChunkweek6_homework"]=self["webpackChunkweek6_homework"]||[]).push([[970],{1530:function(t,o,s){function d(t){return{all:t=t||new Map,on:function(o,s){var d=t.get(o);d?d.push(s):t.set(o,[s])},off:function(o,s){var d=t.get(o);d&&(s?d.splice(d.indexOf(s)>>>0,1):t.set(o,[]))},emit:function(o,s){var d=t.get(o);d&&d.slice().map((function(t){t(s)})),(d=t.get("*"))&&d.slice().map((function(t){t(o,s)}))}}}s.d(o,{Z:function(){return i}});const a=d();var i=a},6970:function(t,o,s){s.r(o),s.d(o,{default:function(){return Q}});var d=s(6252),a=s(3577),i=s(9963);const e={class:"container"},n=(0,d._)("h2",null,"產品列表",-1),c={class:"row row-cols-1 row-cols-lg-4 g-3"},l={class:"card h-100"},r=["src"],u={class:"card-body"},p={class:"card-title"},g={class:"card-text"},h={class:"card-footer bg-white border-top-0"},m={class:"btn-group btn-group-sm"},b=["onClick","disabled"],w={key:0,class:"fas fa-spinner fa-pulse"},_=(0,d.Uk)(" 查看更多 "),v=["onClick","disabled"],f={class:"spinner-border spinner-border-sm"},k=(0,d.Uk)(" 加到購物車 ");function y(t,o,s,y,L,M){const C=(0,d.up)("FrontProductModal");return(0,d.wg)(),(0,d.iD)("div",e,[n,(0,d._)("div",c,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(L.products,(t=>((0,d.wg)(),(0,d.iD)("div",{class:"col",key:t.id},[(0,d._)("div",l,[(0,d._)("img",{src:t.imageUrl,class:"card-img-top",alt:"..."},null,8,r),(0,d._)("div",u,[(0,d._)("h5",p,(0,a.zw)(t.title),1),(0,d._)("p",g,(0,a.zw)(t.description),1)]),(0,d._)("div",h,[(0,d._)("div",m,[(0,d._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:o=>M.getProduct(t.id),disabled:L.isLoadingItem===t.id},[L.isLoadingItem===t.id?((0,d.wg)(),(0,d.iD)("i",w)):(0,d.kq)("",!0),_],8,b),(0,d._)("button",{type:"button",class:"btn btn-outline-danger",onClick:o=>M.addToCart(t.id),disabled:L.isLoadingItem===t.id},[(0,d.wy)((0,d._)("span",f,null,512),[[i.F8,L.isLoadingItem===t.id]]),k],8,v)])])])])))),128))]),(0,d.Wm)(C,{ref:"frontProductModal",product:L.product,onAddToCart:M.addToCart},null,8,["product","onAddToCart"])])}const L={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},M={class:"modal-dialog modal-lg",role:"document"},C={class:"modal-content border-0"},I={class:"modal-header bg-dark text-white"},z={class:"modal-title",id:"exampleModalLabel"},q=(0,d._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),x={class:"modal-body"},D={class:"row"},P={class:"col-sm-6"},$=["src"],T={class:"col-sm-6"},U={class:"badge bg-primary rounded-pill"},Z={key:0,class:"h5"},F={key:1,class:"h6"},A={key:2,class:"h5"},H={class:"input-group"},K=["value"];function O(t,o,s,e,n,c){return(0,d.wg)(),(0,d.iD)("div",L,[(0,d._)("div",M,[(0,d._)("div",C,[(0,d._)("div",I,[(0,d._)("h5",z,[(0,d._)("span",null,(0,a.zw)(s.product.title),1)]),q]),(0,d._)("div",x,[(0,d._)("div",D,[(0,d._)("div",P,[(0,d._)("img",{class:"img-fluid",src:s.product.imageUrl,alt:""},null,8,$)]),(0,d._)("div",T,[(0,d._)("span",U,(0,a.zw)(s.product.category),1),(0,d._)("p",null,"商品描述："+(0,a.zw)(s.product.description),1),(0,d._)("p",null,"商品內容："+(0,a.zw)(s.product.content),1),s.product.price?(0,d.kq)("",!0):((0,d.wg)(),(0,d.iD)("div",Z,(0,a.zw)(s.product.origin_price)+" 元 ",1)),s.product.price?((0,d.wg)(),(0,d.iD)("del",F,"原價 "+(0,a.zw)(s.product.origin_price)+" 元",1)):(0,d.kq)("",!0),s.product.price?((0,d.wg)(),(0,d.iD)("div",A," 現在只要 "+(0,a.zw)(s.product.price)+" 元 ",1)):(0,d.kq)("",!0),(0,d._)("div",null,[(0,d._)("div",H,[(0,d.wy)((0,d._)("select",{id:"",class:"form-select","onUpdate:modelValue":o[0]||(o[0]=t=>n.qty=t)},[((0,d.wg)(),(0,d.iD)(d.HY,null,(0,d.Ko)(20,(t=>(0,d._)("option",{value:t,key:`${t}`},(0,a.zw)(t),9,K))),64))],512),[[i.bM,n.qty]]),(0,d._)("button",{type:"button",class:"btn btn-primary",onClick:o[1]||(o[1]=o=>t.$emit("add-to-cart",s.product.id,n.qty))}," 加入購物車 ")])])])])])])])],512)}var Y=s(7424),j=s.n(Y),V={props:{product:{type:Object,default(){return{}}}},data(){return{status:{},modal:"",qty:1,isLoadingItem:""}},methods:{openModal(){this.modal.show()},closeModal(){this.modal.hide()}},mounted(){this.modal=new(j())(this.$refs.modal)}},W=s(3744);const B=(0,W.Z)(V,[["render",O]]);var E=B,G=s(1530),J={components:{FrontProductModal:E},data(){return{products:[],product:{},productId:"",isLoadingItem:""}},methods:{addToCart(t,o=1){this.isLoading=!0;const s="https://vue3-course-api.hexschool.io/v2/api/annawen/cart";this.isLoadingItem=t;const d={product_id:t,qty:o};this.$http.post(s,{data:d}).then((t=>{alert(t.data.message),this.$refs.frontProductModal.closeModal(),this.isLoadingItem="",G.Z.emit("get-cart")})).catch((t=>{console.log(t)}))},getProducts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/v2/api/annawen/products";this.$http.get(t).then((t=>{this.products=t.data.products,this.isLoading=!1})).catch((t=>{console.log(t)}))},getProduct(t){this.isLoading=!0;const o=`https://vue3-course-api.hexschool.io/v2/api/annawen/product/${t}`;this.isLoadingItem=t,this.$http.get(o).then((t=>{this.isLoadingItem="",this.product=t.data.product,this.isLoading=!1,this.$refs.frontProductModal.openModal()})).catch((t=>{console.log(t)}))}},mounted(){this.getProducts()}};const N=(0,W.Z)(J,[["render",y]]);var Q=N}}]);
//# sourceMappingURL=970.30e01df6.js.map